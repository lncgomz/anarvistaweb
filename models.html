<!DOCTYPE html>
<html>
  <link rel="icon" href="data:;base64,iVBORw0KGgo=" />
  <script src="js/aframe.min.js"></script>
  <script src="js/aframe-ar.js"></script>
  <script src="js/aframe-particle-system-component.js"></script>

  <style>
    .btn {
      z-index: 9999 !important;
    }
  </style>

  <script>
    AFRAME.registerComponent('soundhandler', {
      tick: function () {
        var entity = document.querySelector('[sound]')
        if (document.querySelector('a-marker').object3D.visible == true) {
          entity.components.sound.playSound()
        } else {
          entity.components.sound.pauseSound()
        }
      },
    })
  </script>

  <body style="margin: 0px; overflow: hidden;">
    <a-scene
      embedded
      vr-mode-ui="enabled: false;"
      arjs="debugUIEnabled: false;"
    >
      <a-assets>
        <a-asset-item id="escasez" src="models/Escasez.gltf"></a-asset-item>
        <audio
          id="escasezAudio"
          src="audio/sinParar.mp3"
          preload="auto"
        ></audio>
      </a-assets>

      <a-marker type="pattern" url="data/escasez.patt">
        <a-box
          position="0 0 0"
          scale="0.01 0.01 0.01"
          material="color: black;"
          soundhandler
        ></a-box>
        <a-entity
          position="0 0 0"
          particle-system="
            texture: images/particles/skull.png;
            color: #000000, #FFFFFF; 
            size: 1, 0;
            velocityValue: 0.005 0.005 0.005;
            velocitySpread: 0.5 0 0.5; 
            accelerationValue: 0.005 0.005 0.005;
            accelerationSpread: 0.005 0.005 0.005;
            rotationAngle: 0; 
            blending: 1;
            particleCount: 200;
            maxAge: 5; "
        ></a-entity>
        <a-entity
          position="0 0 0"
          rotation="0 0 0"
          scale="0.025 0.025 0.025"
          gltf-model="#escasez"
          animation="property: scale; to: 0.05 0.05 0.05; loop: true; dur: 5000"
          sound="src: #escasezAudio; autoplay: true; loop: true"
        >
        </a-entity>
      </a-marker>
      <a-entity camera></a-entity>
    </a-scene>
  </body>
</html>
